<<<<<<< HEAD
!function(e){function t(n){if(r[n])return r[n].exports;var s=r[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=4)}([function(e,t){e.exports=require("express")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),s=r(11),u=function(){function e(){}return e.clearDB=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var e;return n.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,s.SurveyModel.remove({})];case 1:return r.sent(),t.status(200).send({code:0,message:"success"}),[3,3];case 2:return e=r.sent(),t.status(500).send({code:-4,message:e.data}),[3,3];case 3:return[2]}})})},e.getSurveyFormById=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r,u,o;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),r=e.params.id,[4,s.SurveyModel.findById(r)];case 1:return u=n.sent(),u||t.status(200).send({code:-1,message:"Survey not found"}),t.status(200).send({code:0,message:"success",data:u}),[3,3];case 2:return o=n.sent(),t.status(500).send({code:-4,message:o.data}),[3,3];case 3:return[2]}})})},e.getAllSurveyForms=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var e,r;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.SurveyModel.find({})];case 1:return e=n.sent(),t.status(200).send({code:0,data:e}),[3,3];case 2:return r=n.sent(),t.status(500).send({code:-1,message:r.message}),[3,3];case 3:return[2]}})})},e.getSurveyFormsIndexPage=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var e,r;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.SurveyModel.find({}).limit(3)];case 1:return e=n.sent(),t.status(200).send({code:0,data:e}),[3,3];case 2:return r=n.sent(),t.status(200).send({code:-4,error:r.message}),[3,3];case 3:return[2]}})})},e.createSurveyForm=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r,u,o,a,i,c,d;return n.__generator(this,function(n){switch(n.label){case 0:return r=e.body.info,u=r.title,o=r.description,a=r.action,i=e.body.content,c={title:u,description:o,content:JSON.stringify(i),author:"son",completed:"save"!==a},e.body.id?[3,2]:[4,s.SurveyModel.create(c)];case 1:return d=n.sent(),[3,4];case 2:return[4,s.SurveyModel.update({_id:e.body.id},c)];case 3:d=n.sent(),n.label=4;case 4:return d?t.status(200).send({code:0,message:"Success",data:d}):t.status(200).send({code:1,message:"Error"}),[2]}})})},e.getAllSubmittedClientSurveyForms=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var e,r;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.ClientSurveyModel.find({})];case 1:return e=n.sent(),t.status(200).send({code:0,data:e}),[3,3];case 2:return r=n.sent(),t.status(500).send({code:-1,data:r.message}),[3,3];case 3:return[2]}})})},e.clearAllClientForms=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var e;return n.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,s.ClientSurveyModel.remove({})];case 1:return r.sent(),t.status(200).send({code:0,message:"Success"}),[3,3];case 2:return e=r.sent(),t.status(500).send({code:-1,message:e.message}),[3,3];case 3:return[2]}})})},e.submitClientSurvey=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r,u,o,a,i,c;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),r=e.body.question,u=e.body.survey_id,o=void 0,[4,s.SurveyModel.findById(u)];case 1:return o=n.sent(),a=new s.ClientSurveyModel({content:JSON.stringify(r),completed:!0,survey_id:o._id}),[4,s.ClientSurveyModel.create(a)];case 2:return i=n.sent(),i?t.status(200).send({code:0,message:"Success"}):t.status(200).send({code:1,message:"Error"}),[3,4];case 3:return c=n.sent(),t.status(500).send({code:-1,message:c.message}),[3,4];case 4:return[2]}})})},e.getClientSurveyFormById=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r,u,o;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),r=e.params.id,[4,s.ClientSurveyModel.find({survey_id:r})];case 1:return u=n.sent(),t.status(200).send({code:0,data:u}),[3,3];case 2:return o=n.sent(),t.status(500).send({code:-1,message:o.message}),[3,3];case 3:return[2]}})})},e.updateClientSurvey=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r,u,o,a;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),r=e.params.id,u=e.params.body,console.log(u),[4,s.ClientSurveyModel.update({_id:r},u)];case 1:return o=n.sent(),o?t.status(200).send({code:0,data:o}):t.status(200).send({code:1,message:"Error"}),[3,3];case 2:return a=n.sent(),t.status(200).send({code:-1,message:a.message}),[3,3];case 3:return[2]}})})},e}();t.default=u},function(e,t){e.exports=require("mongoose")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12);t.jsonParser=n.json(),t.urlEncodedParser=n.urlencoded({extended:!1})},function(e,t,r){e.exports=r(5)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),s=r(6),u=r(8),o=r(9),a=r(13),i=r(14),c=n();s.default.mgConnect();var d=Object({NODE_ENV:"production"}).PORT||3e3,l=Object({NODE_ENV:"production"}).IP,f=function(){return console.log("Server is listening... "+(l||"localhost")+":"+d)};c.use(u.customCORS),c.use("/survey",o.default),c.use("/client-survey",a.default),c.use("/test",i.default),c.listen(d,l,f)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),s=function(){function t(e,t){void 0===e&&(e="mongodb://localhost/form_database"),void 0===t&&(t={keepAlive:3e5,connectTimeoutMS:3e4,useMongoClient:!0}),this.mongodbURI=e,this.options=t}return t.mgConnect=function(r,s,u){void 0===u&&(u=e.Promise);var o=new t(r,s);n.Promise=u,n.connect(o.mongodbURI,o.options)},t}();t.default=s}).call(t,r(7))},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";function n(e,t,r){t.header("Access-Control-Allow-Origin","*"),t.header("Access-Control-Allow-Methods","GET, POST, OPTIONS, PUT, PATCH, DELETE"),t.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),r()}Object.defineProperty(t,"__esModule",{value:!0}),t.customCORS=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=r(3),u=r(0).Router();u.get("/",n.default.getAllSurveyForms),u.get("/index",n.default.getSurveyFormsIndexPage),u.get("/:id",n.default.getSurveyFormById),u.post("/",s.jsonParser,n.default.createSurveyForm),u.put("/:id",s.jsonParser,n.default.updateClientSurvey),t.default=u},function(e,t){e.exports=require("tslib")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),s=new n.Schema({title:String,description:String,author:{id:{type:n.SchemaTypes.ObjectId,ref:"User"},username:String},content:n.SchemaTypes.Mixed,completed:Boolean}),u=n.model("Survey",s);t.SurveyModel=u;var o=new n.Schema({author:{id:{type:n.SchemaTypes.ObjectId,ref:"User"},username:String},content:n.SchemaTypes.Mixed,completed:Boolean}),a=n.model("ClientSurvey",o);t.ClientSurveyModel=a},function(e,t){e.exports=require("body-parser")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=r(3),u=r(0).Router();u.get("/",n.default.getAllSubmittedClientSurveyForms),u.get("/:id",n.default.getClientSurveyFormById),u.post("/",s.jsonParser,n.default.submitClientSurvey),t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=r(0).Router();s.get("/clearDB",n.default.clearDB),s.get("/remove",n.default.clearAllClientForms),s.get("/",function(e,t){t.json({message:"api is running"})}),t.default=s}]);
=======
!function(e){function t(s){if(r[s])return r[s].exports;var n=r[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,s){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:s})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=3)}([function(e,t){e.exports=require("express")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(9),n=r(10),u=function(){function e(){}return e.clearDB=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var e;return s.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,n.SurveyModel.remove({})];case 1:return r.sent(),t.status(200).send({code:0,message:"success"}),[3,3];case 2:return e=r.sent(),t.status(500).send({code:-4,message:e.data}),[3,3];case 3:return[2]}})})},e.getSurveyFormById=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var r,u,o;return s.__generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),r=e.params.formId,[4,n.SurveyModel.findById(r)];case 1:return u=s.sent(),u||t.status(200).send({code:-1,message:"Survey not found"}),t.status(200).send({code:0,message:"success",data:u}),[3,3];case 2:return o=s.sent(),t.status(500).send({code:-4,message:o.data}),[3,3];case 3:return[2]}})})},e.getAllSurveyForms=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var e,r;return s.__generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,n.SurveyModel.find({})];case 1:return e=s.sent(),t.status(200).send({code:0,data:e}),[3,3];case 2:return r=s.sent(),t.status(500).send({code:-1,message:r.message}),[3,3];case 3:return[2]}})})},e.createSurveyForm=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var r,u,o;return s.__generator(this,function(s){switch(s.label){case 0:return r=e.body,u=e.params.formId,u?[3,2]:[4,n.SurveyModel.create(r)];case 1:return o=s.sent(),console.log("mgcreate: "+o.toString()),[3,4];case 2:return[4,n.SurveyModel.update({_id:u},r)];case 3:o=s.sent(),s.label=4;case 4:return o?t.status(200).send({code:0,message:"Success",data:o}):t.status(200).send({code:1,message:"Error"}),[2]}})})},e.getAllSubmittedClientSurveyForms=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var e,r;return s.__generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,n.ClientSurveyModel.find({})];case 1:return e=s.sent(),t.status(200).send({code:0,data:e}),[3,3];case 2:return r=s.sent(),t.status(500).send({code:-1,data:r.message}),[3,3];case 3:return[2]}})})},e.clearAllClientForms=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var e;return s.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,n.ClientSurveyModel.remove({})];case 1:return r.sent(),t.status(200).send({code:0,message:"Success"}),[3,3];case 2:return e=r.sent(),t.status(500).send({code:-1,message:e.message}),[3,3];case 3:return[2]}})})},e.submitClientSurvey=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var r,u,o,a,i,c;return s.__generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),r=e.body.question,u=e.body.survey_id,o=void 0,[4,n.SurveyModel.findById(u)];case 1:return o=s.sent(),a=new n.ClientSurveyModel({content:JSON.stringify(r),completed:!0,survey_id:o._id}),[4,n.ClientSurveyModel.create(a)];case 2:return i=s.sent(),i?t.status(200).send({code:0,message:"Success"}):t.status(200).send({code:1,message:"Error"}),[3,4];case 3:return c=s.sent(),t.status(500).send({code:-1,message:c.message}),[3,4];case 4:return[2]}})})},e.getClientSurveyFormById=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var r,u,o;return s.__generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),r=e.params.id,[4,n.ClientSurveyModel.find({survey_id:r})];case 1:return u=s.sent(),t.status(200).send({code:0,data:u}),[3,3];case 2:return o=s.sent(),t.status(500).send({code:-1,message:o.message}),[3,3];case 3:return[2]}})})},e.updateClientSurvey=function(e,t){return s.__awaiter(this,void 0,void 0,function(){var r,u,o,a;return s.__generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),r=e.params.id,u=e.params.body,console.log(u),[4,n.ClientSurveyModel.update({_id:r},u)];case 1:return o=s.sent(),o?t.status(200).send({code:0,data:o}):t.status(200).send({code:1,message:"Error"}),[3,3];case 2:return a=s.sent(),t.status(200).send({code:-1,message:a.message}),[3,3];case 3:return[2]}})})},e}();t.default=u},function(e,t){e.exports=require("mongoose")},function(e,t,r){e.exports=r(4)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(0),n=r(5),u=r(7),o=r(8),a=r(11),i=r(12),c=Object({NODE_ENV:"production"}).PORT||3e3,d=Object({NODE_ENV:"production"}).IP,l=function(){return console.log("Server is listening... "+(d||"localhost")+":"+c)},f=s();n.default.mgConnect(),f.use(u.customCORS),f.use("/survey",o.default),f.use("/client-survey",a.default),f.use("/test",i.default),f.listen(c,d,l)},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var s=r(2),n=function(){function t(e,t){void 0===e&&(e="mongodb://localhost/form_database"),void 0===t&&(t={keepAlive:3e5,connectTimeoutMS:3e4,useMongoClient:!0}),this.mongodbURI=e,this.options=t}return t.mgConnect=function(r,n,u){void 0===u&&(u=e.Promise);var o=new t(r,n);s.Promise=u,s.connect(o.mongodbURI,o.options)},t}();t.default=n}).call(t,r(6))},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";function s(e,t,r){t.header("Access-Control-Allow-Origin","*"),t.header("Access-Control-Allow-Methods","GET, POST, OPTIONS, PUT, PATCH, DELETE"),t.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),r()}Object.defineProperty(t,"__esModule",{value:!0}),t.customCORS=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(1),n=r(0).json(),u=r(0).Router();u.get("/",s.default.getAllSurveyForms),u.get("/:formId",s.default.getSurveyFormById),u.post("/",n,s.default.createSurveyForm),u.put("/:formId",n,s.default.updateClientSurvey),t.default=u},function(e,t){e.exports=require("tslib")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(2),n=new s.Schema({title:String,description:String,author:{id:{type:s.SchemaTypes.ObjectId,ref:"User"},username:String},sectionBreaks:[s.SchemaTypes.Mixed],contents:[s.SchemaTypes.Mixed],isDeleted:Boolean,completed:Boolean}),u=s.model("Survey",n);t.SurveyModel=u;var o=new s.Schema({author:{id:{type:s.SchemaTypes.ObjectId,ref:"User"},username:String},userInfo:{firstName:String,lastName:String,email:String,phone:Number,address:String,gender:String},contents:[s.SchemaTypes.Mixed],completed:Boolean}),a=s.model("ClientSurvey",o);t.ClientSurveyModel=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(1),n=r(0).Router(),u=r(0).json();n.get("/",s.default.getAllSubmittedClientSurveyForms),n.get("/:formId",s.default.getClientSurveyFormById),n.post("/",u,s.default.submitClientSurvey),t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(1),n=r(0).Router();n.get("/clearDB",s.default.clearDB),n.get("/remove",s.default.clearAllClientForms),n.get("/",function(e,t){t.json({message:"api is running"})}),t.default=n}]);
>>>>>>> 6282e0d7ce2ddf3c1b994568e0fab08ddc7d6b57
