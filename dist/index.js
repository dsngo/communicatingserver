!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.w={},r(r.s=12)}([function(e,t){e.exports=require("express")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),s=r(4),u=function(){function e(){}return e.clearDB=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var e;return n.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,s.SurveyModel.remove({})];case 1:return r.sent(),t.status(200).send({code:0,message:"success"}),[3,3];case 2:return e=r.sent(),t.status(500).send({code:-4,message:e.data}),[3,3];case 3:return[2]}})})},e.getSurveyFormById=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r,u;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.SurveyModel.findById(e.params.formId)];case 1:return(r=n.sent())?t.status(200).send({code:0,message:"Successfully Fetched Survey Form",data:r}):t.status(200).send({code:-1,message:"Survey not found"}),[3,3];case 2:return u=n.sent(),t.status(500).send({code:-4,message:u.data}),[3,3];case 3:return[2]}})})},e.getAllSurveyForms=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var e,r;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.SurveyModel.find({})];case 1:return e=n.sent(),t.status(200).send({code:0,data:e}),[3,3];case 2:return r=n.sent(),t.status(500).send({code:-1,message:r.message}),[3,3];case 3:return[2]}})})},e.getAllRecentForms=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var e,r,u;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.SurveyModel.find({})];case 1:return e=n.sent(),r=e.map(function(e){return{title:e.title,formId:e._id,completed:e.completed,author:e.author.username,description:e.description,createdDate:e._id.getTimestamp()}}),t.status(200).send({code:0,message:"Successfully Fetched Recent Forms",data:r}),[3,3];case 2:return u=n.sent(),t.status(500).send({code:-1,message:u.message}),[3,3];case 3:return[2]}})})},e.createSurveyForm=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r,u;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.SurveyModel.create(e.body)];case 1:return r=n.sent(),t.status(200).send({code:0,message:"Successful Create New Survey",data:r}),[3,3];case 2:return u=n.sent(),t.status(500).send({code:1,message:u.message}),[3,3];case 3:return[2]}})})},e.getAllSubmittedClientSurveyForms=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var e,r;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.ClientSurveyModel.find({})];case 1:return e=n.sent(),t.status(200).send({code:0,data:e}),[3,3];case 2:return r=n.sent(),t.status(500).send({code:-1,data:r.message}),[3,3];case 3:return[2]}})})},e.clearAllClientForms=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var e;return n.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,s.ClientSurveyModel.remove({})];case 1:return r.sent(),t.status(200).send({code:0,message:"Success"}),[3,3];case 2:return e=r.sent(),t.status(500).send({code:-1,message:e.message}),[3,3];case 3:return[2]}})})},e.submitClientSurvey=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r,u,o,a;return n.__generator(this,function(c){switch(c.label){case 0:return c.trys.push([0,5,,6]),r=e.body,u=r.clientSurveyId,o=n.__rest(r,["clientSurveyId"]),console.log(o),u?[4,s.SurveyModel.findByIdAndUpdate(u,o)]:[3,2];case 1:return c.sent(),t.status(200).send({code:0,message:"Update Client Survey Success"}),[3,4];case 2:return[4,s.ClientSurveyModel.create(o)];case 3:c.sent(),t.status(200).send({code:0,message:"Create Client Survey Success"}),c.label=4;case 4:return[3,6];case 5:return a=c.sent(),t.status(500).send({code:-1,message:a.message}),[3,6];case 6:return[2]}})})},e.getClientSurveyFormById=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r,u,o;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),r=e.params.clientSurveyId,[4,s.ClientSurveyModel.find({_id:r})];case 1:return u=n.sent(),t.status(200).send({code:0,data:u,message:"Found Client Survey"}),[3,3];case 2:return o=n.sent(),t.status(500).send({code:-1,message:o.message}),[3,3];case 3:return[2]}})})},e.updateSurveyForm=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.SurveyModel.findByIdAndUpdate(e.params.formId,e.body)];case 1:return n.sent(),t.status(200).send({code:0,message:"Update Survey Form Success"}),[3,3];case 2:return r=n.sent(),t.status(200).send({code:-1,message:r.message}),[3,3];case 3:return[2]}})})},e}();t.default=u},function(e,t){e.exports=require("mongoose")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=r(0).Router();s.get("/clearDB",n.default.clearDB),s.get("/remove",n.default.clearAllClientForms),s.get("/",function(e,t){t.json({message:"api is running"})}),t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),s=new n.Schema({title:String,description:String,author:{id:{type:n.SchemaTypes.ObjectId,ref:"User"},username:String},sectionBreaks:[n.SchemaTypes.Mixed],contents:[n.SchemaTypes.Mixed],isDeleted:Boolean,completed:Boolean}),u=n.model("Survey",s);t.SurveyModel=u;var o=new n.Schema({author:{id:{type:n.SchemaTypes.ObjectId,ref:"User"},username:String},clientInfo:{firstName:String,lastName:String,email:String,phone:Number,address:String,gender:String},surveyId:String,contents:[n.SchemaTypes.Mixed],completed:Boolean}),a=n.model("ClientSurvey",o);t.ClientSurveyModel=a},function(e,t){e.exports=require("tslib")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=r(0).json(),u=r(0).Router();u.route("/").get(n.default.getAllSurveyForms).post(s,n.default.createSurveyForm),u.route("/recent").get(n.default.getAllRecentForms),u.route("/form/:formId").get(n.default.getSurveyFormById).put(s,n.default.updateSurveyForm),t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.customCORS=function(e,t,r){t.header("Access-Control-Allow-Origin","*"),t.header("Access-Control-Allow-Methods","GET, POST, OPTIONS, PUT, PATCH, DELETE"),t.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),r()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),s=function(){function e(e,t){void 0===e&&(e="mongodb://admin:admin123@ds129776.mlab.com:29776/form_database"),void 0===t&&(t={keepAlive:3e5,connectTimeoutMS:3e4}),this.mongodbURI=e,this.options=t}return e.mgConnect=function(t,r){var s=new e(t,r);n.connect(s.mongodbURI,s.options)},e.getTime=function(e){return n.Types.ObjectId(e)},e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),s=r(8),u=r(7),o=r(6),a=r(3),c=n();s.default.mgConnect(),c.use(u.customCORS),c.use("/survey",o.default),c.use("/test",a.default),c.get("/",function(e,t){return t.send("This is a node JS server for api fetching. Nothing too interesting here. If you are interest go to fb.com/DanielDNgo. PS: Im coool!")}),t.default=c},function(e,t){e.exports=require("http")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),s=r(9),u=Object({NODE_ENV:"production"}).PORT||3e3,o=Object({NODE_ENV:"production"}).IP||"localhost",a=n.createServer(s.default);s.default;a.listen(u,o,function(){return console.log("Server is listening... "+(o||"localhost")+":"+u)})},function(e,t,r){e.exports=r(11)}]);