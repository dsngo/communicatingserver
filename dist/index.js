!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=2)}([function(e,t){e.exports=require("express")},function(e,t){e.exports=require("mongoose")},function(e,t,n){e.exports=n(3)},function(e,t,n){"use strict";(function(e){function r(e,t,n){t.header("Access-Control-Allow-Origin","*"),t.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),n()}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),s=n(1),i=n(5),u=o();u.use(r),u.use(i.json()),u.use(i.urlencoded({extended:!1}));var a=n(6),c=Object({NODE_ENV:"production"}).PORT||3e3,d=Object({NODE_ENV:"production"}).IP,l=function(){return console.log("Server is listening... "+(d||"localhost")+":"+c)},f={server:{socketOptions:{keepAlive:3e5,connectTimeoutMS:3e4}},replset:{socketOptions:{keepAlive:3e5,connectTimeoutMS:3e4}}};!function(){s.connect("mongodb://localhost/form_database",f),s.Promise=e.Promise}(),u.use("/api/v1",a),u.listen(c,d,l)}).call(t,n(4))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=require("body-parser")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=n(0),s=o.Router();s.get("/initDB",r.default.initDB),s.get("/survey",r.default.list),s.post("/survey/create",r.default.create),s.get("/survey/clearDB",r.default.clearDB),s.get("/survey/get/:id",r.default.getById),s.get("/test",function(e,t){t.json({message:"api is running"})}),e.exports=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),o=n(9),s=[{title:"SURVEY1",content:{question1:"mot hai ba",question2:"ba bon nam"},author:{username:"Daniel"}},{title:"SURVEY2",content:{question1:"mot hai ba bon",question2:"ba bon nam sau"},author:{username:"Michelle"}},{title:"SURVEY3",content:{question1:"mot hai ba bon",question2:"ba bon nam sau"},author:{username:"Michelle"}},{title:"SURVEY4",content:{question1:"mot hai ba bon",question2:"ba bon nam sau"},author:{username:"Daniel"}}],i=function(){function e(){}return e.clearDB=function(e,t){return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(e){switch(e.label){case 0:return[4,o.default.remove({})];case 1:return e.sent(),t.status(200).send({code:0,message:"success"}),[2]}})})},e.initDB=function(e,t){return r.__awaiter(this,void 0,void 0,function(){var e=this;return r.__generator(this,function(n){switch(n.label){case 0:return[4,o.default.remove({})];case 1:return n.sent(),s.forEach(function(t){return r.__awaiter(e,void 0,void 0,function(){var e;return r.__generator(this,function(n){switch(n.label){case 0:return[4,o.default.create(t)];case 1:return e=n.sent(),[2]}})})}),t.status(200).send({code:0}),[2]}})})},e.getById=function(e,t){return r.__awaiter(this,void 0,void 0,function(){var n,s,i;return r.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.params.id,console.log("get by id"),[4,o.default.findById(n)];case 1:return s=r.sent(),s||t.status(200).send({code:-1,message:"Survey not found"}),t.status(200).send({code:0,message:"success",data:s}),[3,3];case 2:return i=r.sent(),t.status(200).send({code:-4,message:i.data}),[3,3];case 3:return[2]}})})},e.list=function(e,t){return r.__awaiter(this,void 0,void 0,function(){var e;return r.__generator(this,function(n){switch(n.label){case 0:return[4,o.default.find({}).exec()];case 1:return e=n.sent(),t.status(200).send({code:0,data:e}),[2]}})})},e.create=function(e,t){return r.__awaiter(this,void 0,void 0,function(){var n,s,i,u,a,c,d;return r.__generator(this,function(r){switch(r.label){case 0:return n=e.body,s=e.body.info,i=s.title,u=s.description,a=e.body.content,c={title:i,description:u,content:JSON.stringify(a),author:"son"},[4,o.default.create(c)];case 1:return d=r.sent(),d?t.status(200).send({code:0,message:"SUCCESS",data:d}):t.status(200).send({code:1,message:"Error"}),[2]}})})},e}();t.default=i},function(e,t){e.exports=require("tslib")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=new r.Schema({title:String,description:String,author:{id:{type:r.SchemaTypes.ObjectId,ref:"User"},username:String},content:r.SchemaTypes.Mixed}),s=r.model("Survey",o);t.default=s}]);