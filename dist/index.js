!function(e){function t(r){if(n[r])return n[r].exports;var s=n[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=3)}([function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("tslib")},function(e,t,n){e.exports=n(4)},function(e,t,n){"use strict";(function(e){function r(e,t,n){t.header("Access-Control-Allow-Origin","*"),t.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),n()}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),o=n(0),u=n(6),i=s();i.use(r),i.use(u.json()),i.use(u.urlencoded({extended:!1}));var a=n(7),c=Object({NODE_ENV:"production"}).PORT||3e3,d=Object({NODE_ENV:"production"}).IP,l=function(){return console.log("Server is listening... "+(d||"localhost")+":"+c)},f={server:{socketOptions:{keepAlive:3e5,connectTimeoutMS:3e4}},replset:{socketOptions:{keepAlive:3e5,connectTimeoutMS:3e4}}};!function(){o.connect("mongodb://localhost/form_database",f),o.Promise=e.Promise}(),i.use("/api/v1",a),i.listen(c,d,l)}).call(t,n(5))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=require("body-parser")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),s=n(10),o=n(1),u=o.Router();u.get("/survey",r.default.list),u.post("/survey/create",r.default.saveSurvey),u.get("/survey/clearDB",r.default.clearDB),u.get("/survey/get/:id",r.default.getById),u.post("/response",s.default.createResponse),u.get("/response",s.default.getAllResponse),u.get("/response/get-by-survey/:id",s.default.getBySurvey),u.get("/test",function(e,t){t.json({message:"api is running"})}),e.exports=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(9),o=function(){function e(){}return e.clearDB=function(e,t){return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(e){switch(e.label){case 0:return[4,s.default.remove({})];case 1:return e.sent(),t.status(200).send({code:0,message:"success"}),[2]}})})},e.getById=function(e,t){return r.__awaiter(this,void 0,void 0,function(){var n,o,u;return r.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.params.id,console.log("get by id"),[4,s.default.findById(n)];case 1:return o=r.sent(),o||t.status(200).send({code:-1,message:"Survey not found"}),t.status(200).send({code:0,message:"success",data:o}),[3,3];case 2:return u=r.sent(),t.status(200).send({code:-4,message:u.data}),[3,3];case 3:return[2]}})})},e.list=function(e,t){return r.__awaiter(this,void 0,void 0,function(){var e;return r.__generator(this,function(n){switch(n.label){case 0:return[4,s.default.find({})];case 1:return e=n.sent(),t.status(200).send({code:0,data:e}),[2]}})})},e.saveSurvey=function(e,t){return r.__awaiter(this,void 0,void 0,function(){var n,o,u,i,a,c,d,l,f;return r.__generator(this,function(r){switch(r.label){case 0:return n=e.body,o=e.body.info,u=o.title,i=o.description,a=o.action,c=e.body.content,d={title:u,description:i,content:JSON.stringify(c),author:"son",status:a},e.body.id?[3,2]:[4,s.default.create(d)];case 1:return l=r.sent(),[3,4];case 2:return[4,s.default.update({_id:e.body.id},d)];case 3:f=r.sent(),r.label=4;case 4:return t.status(200).send({code:1,message:"Error"}),[2]}})})},e.submitSurvey=function(e,t){return r.__awaiter(this,void 0,void 0,function(){var n,o,u,i,a,c,d;return r.__generator(this,function(r){switch(r.label){case 0:return n=e.body,o=e.body.info,u=o.title,i=o.description,a=e.body.content,c={title:u,description:i,content:JSON.stringify(a),author:"son"},[4,s.default.create(c)];case 1:return d=r.sent(),d?t.status(200).send({code:0,message:"SUCCESS",data:d}):t.status(200).send({code:1,message:"Error"}),[2]}})})},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=new r.Schema({title:String,description:String,author:{id:{type:r.SchemaTypes.ObjectId,ref:"User"},username:String},content:r.SchemaTypes.Mixed,status:String}),o=r.model("Survey",s);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),s=n(11),o=function(){function e(){}return e.getAllResponse=function(e,t){return r.__awaiter(this,void 0,void 0,function(){var e,n;return r.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,s.default.find({})];case 1:return e=r.sent(),t.status(200).send({code:0,data:e}),[3,3];case 2:return n=r.sent(),[3,3];case 3:return[2]}})})},e.createResponse=function(e,t){return r.__awaiter(this,void 0,void 0,function(){var n,o,u,i,a;return r.__generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),n=e.body.question,o=e.body.survey_id,u=new s.default({survey_id:o,content:JSON.stringify(n),status:"active"}),console.log(u),[4,s.default.create(u)];case 1:return i=r.sent(),i?t.status(200).send({code:0,message:"Success"}):t.status(200).send({code:1,message:"Error"}),[3,3];case 2:return a=r.sent(),t.status(200).send({code:1,message:a.message}),[3,3];case 3:return[2]}})})},e.getBySurvey=function(e,t){return r.__awaiter(this,void 0,void 0,function(){var n,o;return r.__generator(this,function(r){switch(r.label){case 0:return n=e.params.id,console.log(n),[4,s.default.find({survey_id:n})];case 1:return o=r.sent(),t.status(200).send({code:0,data:o}),[2]}})})},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=new r.Schema({survey_id:{type:r.SchemaTypes.ObjectId,ref:"Survey"},content:r.SchemaTypes.Mixed,status:String}),o=r.model("Response",s);t.default=o}]);